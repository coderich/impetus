server:
  port: 3003

data:
  rooms:
    a:
      exits:
        n: rooms.b
    b:
      exits:
        s: rooms.a

  npcs:
    rich:
      room: rooms.b
      name: 'Rich'
      age: 43
    anne:
      name: 'Anne'
      age: 38

events:
  $server.ready:
    - $data.set: ['installed', { $db.get: 'impetus.installed '}]
    - if: [{ '!': { var: data.installed } }, { $emit: 'install' }]

  $server.connection:
    - $socket.emit: ['data', 'Welcome to Impetus!']

  install:
    - $db.set: ['impetus', { $object: ['installed', true] }]
